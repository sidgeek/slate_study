#### 槽位/挖槽功能设计（纯前端）
目标：在输入框中插入、编辑与识别“槽位”（结构化占位符），并在发送时导出结构化提示数据（不涉及接口）。

概念与数据结构：
- 槽位：可视化的占位片段（chip），包含 `type`（dataset/field/metric/time/op）、`value`、`label`、`source`（手动/自动）、`valid`。
- 前端导出：`text`（纯文本提示）+ `slots[]`（数组）。

需求要点：
- 插入：命令面板/自动完成/拖拽插入槽位。
- 编辑：点击槽位弹出面板修改类型与值；支持删除与替换。
- 建议与校验：基于字典（数据集、字段、维度/指标）做模糊匹配与有效性提示。
- 自动挖槽：从自然语言中按规则识别潜在槽位并建议一键替换。
- 序列化：在本地存储中保留槽位结构，不破坏文本可读性。

#### 编辑器选型对比（TipTap / Slate / wangEditor）
定位与生态：
- TipTap：基于 ProseMirror 的富文本框架，扩展生态完善，适合构建聊天/提示词输入与复杂内联组件。
- Slate：低层可组合的编辑引擎，完全可控，需较多自研插件；更贴近“自己造编辑器”。
- wangEditor：偏 WYSIWYG 内容编辑器（文章/博客），内建工具多，深度定制与内联复杂组件能力有限。

挖槽/结构化占位：
- TipTap：通过 Node/Mark 扩展实现 chip；与命令面板、提及、拖拽结合自然。
- Slate：自定义 Element + Decoration 可实现，但需处理较多 schema 与光标交互细节。
- wangEditor：可插入自定义组件，但编辑过程中的结构化约束与序列化较弱。

命令面板与提及：
- TipTap：社区现成 slash/mention 扩展，集成成本低。
- Slate：需自研；能力强但工作量大。
- wangEditor：有基础菜单体系；命令面板/提及需自扩展或绕行。

Markdown 与代码高亮：
- TipTap：可接入 Markdown 扩展与 shiki 高亮，样式一致性好。
- Slate：可做，但插件需自建或引入第三方，维护成本高。
- wangEditor：基础支持为主，代码块体验不及前两者。

体积与性能：
- TipTap：中等偏大，但交互成熟，适合复杂输入。
- Slate：核心轻，整体取决于自研插件；性能好但工程量大。
- wangEditor：整体偏重，适合富文本内容编辑场景。

学习曲线与维护：
- TipTap：中等；生态与示例完善，团队上手快。
- Slate：偏陡；高度自由带来更多边界处理与维护成本。
- wangEditor：低；但对“挖槽/结构化提示”不够友好。

结论：
- 你的场景（提示词输入 + 槽位 + 命令面板 + 富媒体）优先 TipTap；
- 强定制且可投入较多开发资源时可选 Slate；
- 文章型内容编辑再考虑 wangEditor。
